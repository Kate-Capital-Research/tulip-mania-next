/* custom.css - Responsive Design for Kate Capital Financial Dashboards

   This stylesheet implements a comprehensive responsive design strategy for
   viewing financial charts and data across different screen sizes.

   IMPORTANT: This project uses MyST Document Engine's book-theme, which uses
   CSS Grid with classes like .article-grid, .col-screen, NOT Sphinx Book Theme
   classes like .bd-main or .bd-content.

   MyST book-theme structure:
   - <main class="article-grid grid-gap">
   - <article class="article-grid subgrid-gap col-screen article content">

   SCREEN SIZE BREAKPOINTS:
   - Very Large (≥2000px):     MAXIMUM expansion (20ch-50ch columns, 0.25fr margins, 0.5rem padding)
   - Large (1536-1999px):      Significant expansion (15ch-40ch columns, 0.5fr margins, 1rem padding)
   - Medium-large (1280-1535px): Good expansion (12ch-30ch columns, 0.75fr margins, 1.5rem padding)
   - Smaller (<1280px):        Default MyST grid (no override)

   KEY FEATURES:
   - CSS Grid column overrides for true content expansion on large screens
   - Reduced side margins (fr values) to allocate more space to content
   - Adaptive font sizing for readability across devices
   - Chart and figure responsiveness with automatic scaling
   - Side-by-side chart layouts that stack on smaller screens
   - Optimized spacing and padding for each breakpoint

   Last updated: November 2025
*/

/* ========================================
   RESPONSIVE CONTENT WIDTH - CSS GRID OVERRIDES
   ======================================== */

/* Base: Target the actual MyST book-theme grid containers */
/* MyST uses main.article-grid and article.article-grid, NOT Sphinx .bd-* classes */
main.article-grid,
article.article-grid,
article.col-screen {
  width: min(100%, calc(100vw - clamp(1.5rem, 3vw, 4rem))) !important;
  max-width: none !important;
  margin-inline: auto !important;
  padding-inline: clamp(0.75rem, 1.5vw, 1.75rem);
}

/* Allow the article subgrid to stretch fully within the available space */
article.article-grid.content,
article.article-grid.subgrid-gap,
article.col-screen.content {
  grid-template-columns: minmax(0, 1fr) !important;
}

/* Expand the overall grid to a single fluid column and remove Tailwind typography caps */
main.article-grid,
article.article-grid,
article.article-grid .article-body,
article.article-grid .content {
  grid-template-columns: minmax(0, 1fr) !important;
}

.article-grid .prose,
.article-grid .article-body.prose,
.article-grid .content .prose,
.article-grid .article-body .prose {
  max-width: none !important;
  width: 100% !important;
}

/* Give ultrawide monitors a little extra breathing room without capping width */
@media (min-width: 2000px) {
  main.article-grid,
  article.article-grid,
  article.col-screen {
    width: min(100%, calc(100vw - clamp(2rem, 4vw, 6rem))) !important;
    padding-inline: clamp(1rem, 2vw, 2.5rem);
  }
}

/* 1) Reduce the top navbar height (default is 4rem) */
html {
  --pst-header-height: 3.5rem;
  /* ↓ from 4rem */
  --pst-header-article-height: calc(var(--pst-header-height) * 2/3);
}

/* ========================================
   RESPONSIVE FONT SIZING
   ======================================== */

html {
  /* Base font size - responsive across screen sizes */
  --pst-font-size-base: 0.875rem; /* 14px - more readable than 12px */

  /* Scale headings proportionally */
  --pst-font-size-h1: calc(var(--pst-font-size-base) * 2.2); /* ~30.8px */
  --pst-font-size-h2: calc(var(--pst-font-size-base) * 2.0); /* 28px */
  --pst-font-size-h3: calc(var(--pst-font-size-base) * 1.8); /* ~25.2px */
  --pst-font-size-h4: calc(var(--pst-font-size-base) * 1.6); /* ~22.4px */
  --pst-font-size-h5: calc(var(--pst-font-size-base) * 1.4); /* ~19.6px */
  --pst-font-size-h6: calc(var(--pst-font-size-base) * 1.2); /* ~16.8px */
}

/* Slightly smaller fonts on very large screens for better density */
@media (min-width: 2000px) {
  html {
    --pst-font-size-base: 0.875rem; /* Keep at 14px even on large screens */
  }
}

/* Smaller fonts on mobile for better space utilization */
@media (max-width: 767px) {
  html {
    --pst-font-size-base: 0.8125rem; /* 13px on mobile */
  }
}

html {
  --pst-sidebar-header-font-size: 1rem;
  --pst-sidebar-font-size: 0.9rem;
  /* ↓ from 0.9rem */
}

/* 2) Shrink the secondary (right-hand) sidebar (default is 17rem) */
html {
  --pst-sidebar-secondary: 12rem;
  /* ↓ from 17rem */
}

/* 3) (Optional) If you also want to shrink the primary (left-hand) sidebar,
   and if your version of the theme supports a --pst-sidebar-primary variable: */
html {
  --pst-sidebar-primary: 12rem;
  /* choose whatever you like */
}

/* 4) Backup override for primary sidebar if that variable isn’t available */
.bd-sidebar-primary {
  width: 12rem !important;
}


/* Force the background of output cells to white in dark mode */
html[data-theme="dark"] .cell_output,
html[data-theme="dark"] .output_area,
html[data-theme="dark"] .output,
html[data-theme="dark"] div.cell_output div.output,
html[data-theme="dark"] div.output_area pre {
  background-color: #ffffff !important;
  /* White background */
  color: #000000 !important;
  /* Black text for readability */
  border: 1px solid #ccc;
  /* Light grey border (optional) */
  padding: 0.5em;
  border-radius: 6px;
}

/* Background color for the navigation bar */
/*html[data-theme="light"] .bd-header header.bd-header {
  background-color: #e47d7d !important;
}

/* Change the color of the search bar  */
/*html[data-theme="light"] kbd {
  background-color: #ffffff !important; /* your desired background color 
  color: #dfdfdf !important; /* your desired text color 
}*/

html[data-theme="light"] {
  /* --pst-color-heading: #4b1a78;  */
  /* --pst-color-on-background: #000000;  */
  --pst-color-primary: #797878;
  --pst-color-secondary: #565656;
  --pst-color-secondary-highlight: #333333;
  /* --pst-color-accent: #000000; */
  --pst-color-info: rgb(200, 74, 99);
  --mystnb-source-margin-color: #e17d17;
  /* Cell left margin color */
}

/* Headers in the pages not the navbar */
/* Dark gray text instead of pure black 
Primary does the color of the links
Seconday does the color of the links as you hover and clicked

*/

html[data-theme="light"] {
  --pst-color-info: rgb(200, 74, 99);
  --mystnb-source-margin-color: #e17d17;
  /* Cell left margin color */
}

html[data-theme="dark"] {
  --mystnb-source-bg-color: #14181e;
  /* Cell background color */
  --mystnb-source-margin-color: #e17d17;
  /* Cell left margin color */
}

/* ========================================
   RESPONSIVE CHARTS AND FIGURES
   ======================================== */

/* Ensure all figures and charts are responsive */
.cell_output img,
.output_area img,
figure img {
  max-width: 100% !important;
  height: auto !important;
  display: block;
}

/* Plotly charts responsive container */
.plotly-graph-div {
  width: 100% !important;
  height: auto !important;
}

/* Ensure Plotly charts scale properly */
.js-plotly-plot {
  width: 100% !important;
}

/* Table responsiveness */
.cell_output table,
.output_area table {
  max-width: 100%;
  overflow-x: auto;
  display: block;
}

/* Better spacing for notebook outputs on different screens */
@media (min-width: 1400px) {
  .cell_output,
  .output_area {
    margin: 1.5rem 0;
  }
}

@media (max-width: 767px) {
  .cell_output,
  .output_area {
    margin: 1rem 0;
  }

  /* Stack tables vertically on mobile if needed */
  .cell_output table,
  .output_area table {
    font-size: 0.85em;
  }
}

/* Improve spacing for multi-chart layouts */
.cell_output > div,
.output_area > div {
  margin-bottom: 1rem;
}

/* Ensure iframe embeds (if any) are responsive */
.cell_output iframe,
.output_area iframe {
  max-width: 100%;
}
